#!/usr/bin/env bash
#
# Rip an internet radio; list read from radiok.lst

SCRIPT=$(which $0)
SCRIPT_PATH=$(dirname $SCRIPT)

function menu
{
    PROMPT=$1
    for (( I = 0; I < ${#NEVEK[@]}; I++ ))
    do
        echo "($I)" ${NEVEK[$I]}
    done

    ID=-1
    until [[ $ID -gt -1 && $ID -lt ${#NEVEK[@]} ]]
    do
        echo -n "$PROMPT "
        read ID
    done

    return $ID
}

# Az online rádiók listája
exec 9<&0  # kilences file descriptorba elmentjuk stdin-t

exec<$SCRIPT_PATH/radiok.lst
ID=0
while read LINE
do
    NEVEK[$ID]=$LINE
    read LINE
    RADIOK[$ID]=$LINE
    ID=`expr $ID + 1`;
done

exec 0<&9 9<&- # visszaallitjuk stdin-t

menu "Melyik rádiót akarod?"

#streamripper ${RADIOK[$?]} -d /home/abesto/music/stream -rz 10100 &
#line
mplayer ${RADIOK[$?]} 

